name: CI - Tests Automatiques

on:
  push:
  pull_request:
  workflow_dispatch:

jobs:
  info:
    name: Informations du Workflow
    runs-on: ubuntu-latest
    
    steps:
      - name: Afficher les informations
        run: |
          echo "ğŸš€ Workflow dÃ©clenchÃ© par: ${{ github.event_name }}"
          echo "ğŸ”€ Branche: ${{ github.ref_name }}"
          echo "ğŸ‘¤ Auteur: ${{ github.actor }}"
          echo "ğŸ“¦ Repository: ${{ github.repository }}"
          echo "ğŸ’» SystÃ¨me: Ubuntu Latest"
          echo "ğŸ“… Date: $(date)"

  test:
    name: ExÃ©cuter les Tests
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout du code
        uses: actions/checkout@v4
      
      - name: ğŸŸ¢ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: ğŸ“‹ VÃ©rifier Node.js
        run: |
          echo "Version de Node.js installÃ©e:"
          node --version
          echo "Version de npm installÃ©e:"
          npm --version
      
      - name: ğŸ“¦ Installer les dÃ©pendances
        run: npm install
      
      - name: ğŸ¯ Lancer l'application
        run: npm start
      
      - name: ğŸ§ª ExÃ©cuter les tests
        run: npm test
      
      - name: âœ… Tests rÃ©ussis
        if: success()
        run: |
          echo "============================================"
          echo "âœ… Tous les tests sont passÃ©s avec succÃ¨s !"
          echo "âœ… Le code est prÃªt pour le dÃ©ploiement"
          echo "============================================"
      
      - name: âŒ Tests Ã©chouÃ©s
        if: failure()
        run: |
          echo "============================================"
          echo "âŒ Les tests ont Ã©chouÃ©"
          echo "âŒ VÃ©rifiez les logs ci-dessus"
          echo "============================================"

  build:
    name: Build de l'Application
    runs-on: ubuntu-latest
    needs: test
    
    steps:
      - name: ğŸ“¥ Checkout du code
        uses: actions/checkout@v4
      
      - name: ğŸ”¨ Simuler un build
        run: |
          echo "Construction de l'application..."
          mkdir -p dist
          cp src/calculator.js dist/
          echo "Build terminÃ© !"
          ls -la dist/
      
      - name: ğŸ“¤ Sauvegarder l'artefact
        uses: actions/upload-artifact@v4
        with:
          name: application-build
          path: dist/
      
      - name: âœ… Build rÃ©ussi
        run: echo "âœ… Application buildÃ©e et artefact sauvegardÃ©"

  summary:
    name: RÃ©sumÃ© Final
    runs-on: ubuntu-latest
    needs: [test, build]
    if: always()
    
    steps:
      - name: ğŸ“Š RÃ©sumÃ© du Pipeline
        run: |
          echo "================================"
          echo "ğŸ“Š RÃ‰SUMÃ‰ DU PIPELINE CI/CD"
          echo "================================"
          echo "Repository: ${{ github.repository }}"
          echo "Branche: ${{ github.ref_name }}"
          echo "Commit: ${{ github.sha }}"
          echo "Auteur: ${{ github.actor }}"
          echo "================================"
          echo "âœ… Pipeline terminÃ©"
```

**Enregistrer** : Ctrl+S puis fermer.

---

### Fichier 5 : `.gitignore`

**Ouvrir avec** : `notepad .gitignore`

**Copier ce contenu** :
```
node_modules/
dist/
build/
*.log
.DS_Store
Thumbs.db
.env
.env.local